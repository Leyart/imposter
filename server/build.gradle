apply plugin: 'java'
apply plugin: "com.github.johnrengelman.shadow"

compileJava {
    sourceCompatibility = 1.8
}

dependencies {
    compile project (':core')

    // logging
    compile group: 'org.apache.logging.log4j', name: 'log4j-core', version: '2.5'
    compile group: 'org.apache.logging.log4j', name: 'log4j-jcl', version: '2.5'
    compile group: 'org.apache.logging.log4j', name: 'log4j-slf4j-impl', version: '2.5'
    compile group: 'org.apache.logging.log4j', name: 'log4j-1.2-api', version: '2.5'
    compile group: 'org.apache.logging.log4j', name: 'log4j-jul', version: '2.5'

    // plugins
    compile project (':plugin:hbase')

    testCompile group: 'junit', name: 'junit', version: '4.11'
}

shadowJar {
    baseName = rootProject.name
    version = ""
    classifier = "fat"

    manifest {
        attributes "Main-Class": "com.gatehill.imposter.ImposterLauncher"
        attributes "Main-Verticle": "com.gatehill.imposter.ImposterVerticle"
    }

    mergeServiceFiles {
        include "META-INF/services/io.vertx.core.spi.VerticleFactory"
    }
}
